<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMS CrossCheck - Gestion Compl√®te</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0a0a0a;
            --secondary: #666666;
            --accent: #d4af37;
            --light: #fafafa;
            --white: #ffffff;
            --border: #e8e8e8;
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 30px 80px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--primary);
            background: var(--white);
            overflow-x: hidden;
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 80px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .logo-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .nav-tabs {
            display: flex;
            gap: 1rem;
        }

        .nav-tab {
            padding: 0.8rem 1.5rem;
            border: none;
            background: transparent;
            color: var(--secondary);
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-tab.active {
            color: var(--accent);
            background: rgba(212, 175, 55, 0.1);
        }

        .nav-tab:hover {
            color: var(--accent);
            background: rgba(212, 175, 55, 0.05);
        }

        .main-layout {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 3vw, 2.5rem);
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: var(--secondary);
            font-size: 1.1rem;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: var(--white);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .form-textarea {
            min-height: 200px;
            resize: vertical;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-family: 'Inter', sans-serif;
            margin: 0.5rem;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: #b8941f;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background: #555;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .article-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .article-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .article-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .article-card.selected {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
        }

        .article-image {
            height: 200px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            position: relative;
            overflow: hidden;
        }

        .article-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .article-category {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .article-content {
            padding: 1.5rem;
        }

        .article-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .article-description {
            color: var(--secondary);
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .article-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: var(--secondary);
            margin-bottom: 1rem;
        }

        .article-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .article-status {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-available {
            background: #e3f2fd;
            color: #1976d2;
        }

        .status-imported {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .status-cms {
            background: #fff3cd;
            color: #856404;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--secondary);
        }

        .alert {
            padding: 1rem 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            display: none;
            animation: slideInFromTop 0.5s ease;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        @keyframes slideInFromTop {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--secondary);
            font-weight: 600;
        }

        .selected-info {
            background: var(--light);
            padding: 2rem;
            border-radius: 15px;
            margin-top: 2rem;
            border: 2px solid var(--accent);
            animation: fadeInUp 0.5s ease;
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .article-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">C</div>
                <div class="logo-text">CrossCheck CMS</div>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('create')">‚ú® Cr√©er</button>
                <button class="nav-tab" onclick="showTab('import')">üìö Importer</button>
                <button class="nav-tab" onclick="showTab('manage')">üìù G√©rer</button>
                <button class="nav-tab" onclick="showTab('stats')">üìä Stats</button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="main-layout">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">Gestion des Articles</h1>
                <p class="page-subtitle">Cr√©ez, importez et g√©rez vos articles CrossCheck</p>
            </div>

            <!-- Alerts -->
            <div class="alert alert-info" id="loading-alert">
                üîÑ Chargement en cours...
            </div>

            <div class="alert alert-success" id="success-alert">
                ‚úÖ Op√©ration r√©ussie !
            </div>

            <div class="alert alert-error" id="error-alert">
                ‚ùå Erreur lors de l'op√©ration
            </div>

            <!-- Tab: Cr√©er un article -->
            <div id="create-tab" class="tab-content active">
                <div class="card">
                    <h3>‚ú® Cr√©er un Nouvel Article</h3>
                    <form id="article-form">
                        <div class="form-group">
                            <label class="form-label" for="title">Titre de l'article</label>
                            <input type="text" id="title" name="title" class="form-input" placeholder="Entrez le titre de l'article" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="category">Cat√©gorie</label>
                            <select id="category" name="category" class="form-select" required>
                                <option value="">S√©lectionnez une cat√©gorie</option>
                                <option value="apologetique">Apolog√©tique</option>
                                <option value="science">Science & Foi</option>
                                <option value="histoire">Histoire</option>
                                <option value="archeologie">Arch√©ologie</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="description">Description</label>
                            <textarea id="description" name="description" class="form-textarea" placeholder="Description courte de l'article" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="content">Contenu</label>
                            <textarea id="content" name="content" class="form-textarea" placeholder="Contenu complet de l'article" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="image">URL de l'image</label>
                            <input type="url" id="image" name="image" class="form-input" placeholder="https://exemple.com/image.jpg">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            ‚ú® Cr√©er l'article
                        </button>
                    </form>
                </div>
            </div>

            <!-- Tab: Importer des articles -->
            <div id="import-tab" class="tab-content">
                <div class="card">
                    <h3>üìö Importer des Articles Existants</h3>
                    <p>Chargez et importez vos articles HTML existants dans le CMS.</p>
                    <button class="btn btn-primary" onclick="loadRealArticles()">
                        üìö Charger les articles
                    </button>
                </div>

                <div class="article-grid" id="import-grid">
                    <div class="loading">
                        <p>Cliquez sur "Charger les articles" pour voir vos articles existants</p>
                    </div>
                </div>

                <div class="selected-info" id="import-selected-info" style="display: none;">
                    <h3>Article s√©lectionn√©</h3>
                    <div id="import-selected-details"></div>
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="importSelectedArticle()">
                            üì• Importer dans le CMS
                        </button>
                        <button class="btn btn-secondary" onclick="clearImportSelection()">
                            ‚ùå Annuler
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tab: G√©rer les articles -->
            <div id="manage-tab" class="tab-content">
                <div class="card">
                    <h3>üìù G√©rer les Articles du CMS</h3>
                    <p>Modifiez, supprimez ou exportez vos articles cr√©√©s dans le CMS.</p>
                </div>

                <div class="article-grid" id="manage-grid">
                    <div class="loading">
                        <p>Chargement des articles du CMS...</p>
                    </div>
                </div>
            </div>

            <!-- Tab: Statistiques -->
            <div id="stats-tab" class="tab-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-articles">0</div>
                        <div class="stat-label">Articles CMS</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-imported">0</div>
                        <div class="stat-label">Articles Import√©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-available">0</div>
                        <div class="stat-label">Articles Disponibles</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-categories">4</div>
                        <div class="stat-label">Cat√©gories</div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìä D√©tails des Statistiques</h3>
                    <div id="stats-details">
                        <p>Chargement des statistiques...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedImportArticle = null;
        let realArticles = [];
        let editingArticleId = null;

        // Liste des vrais fichiers d'articles
        const articleFiles = [
            'article-african-apologetics.html',
            'article-apologetique-afrique.html',
            'article-apologetique-togo.html',
            'article-archeologie-afrique.html',
            'article-archeologie-biblique.html',
            'article-big-bang.html',
            'article-catacombes.html',
            'article-conscience.html',
            'article-croisades.html',
            'article-dialogue-interreligieux.html',
            'article-dna.html',
            'article-evolution-creation.html',
            'article-exode-animisme-paralleles.html',
            'article-fine-tuning.html',
            'article-gospel-reliability.html',
            'article-jericho.html',
            'article-mesha.html',
            'article-missions-afrique.html',
            'article-missions-catholiques.html',
            'article-pentecotisme-afrique.html',
            'article-problem-evil.html',
            'article-resurrection-christ.html',
            'article-science-foi.html',
            'article-science-prouve-dieu.html',
            'article-sites-togo.html',
            'article-thomas-aquinas.html',
            'article-togo-histoire.html'
        ];

        // Gestion des onglets
        function showTab(tabName) {
            // D√©sactiver tous les onglets
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Activer l'onglet s√©lectionn√©
            document.querySelector(`[onclick="showTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');

            // Charger le contenu selon l'onglet
            switch(tabName) {
                case 'manage':
                    loadCMSArticles();
                    break;
                case 'stats':
                    updateStats();
                    break;
            }
        }

        // Cr√©er un nouvel article
        document.getElementById('article-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const article = {
                id: Date.now(),
                title: formData.get('title'),
                category: formData.get('category'),
                description: formData.get('description'),
                content: formData.get('content'),
                image: formData.get('image') || 'https://via.placeholder.com/800x400?text=Article+CrossCheck',
                date: new Date().toLocaleDateString('fr-FR'),
                isCMS: true,
                createdDate: new Date().toISOString()
            };

            // Sauvegarder dans le localStorage
            let articles = JSON.parse(localStorage.getItem('cms-articles') || '[]');
            articles.push(article);
            localStorage.setItem('cms-articles', JSON.stringify(articles));

            showAlert('success', `Article "${article.title}" cr√©√© avec succ√®s !`);
            this.reset();
            
            // Si on est en mode √©dition, retourner √† la gestion
            if (editingArticleId) {
                editingArticleId = null;
                showTab('manage');
            }
        });

        // Charger les vrais articles
        async function loadRealArticles() {
            const loadingAlert = document.getElementById('loading-alert');
            const grid = document.getElementById('import-grid');
            
            loadingAlert.style.display = 'block';
            grid.innerHTML = '<div class="loading"><p>Chargement en cours...</p></div>';

            realArticles = [];

            for (let i = 0; i < articleFiles.length; i++) {
                const fileName = articleFiles[i];
                try {
                    const response = await fetch(fileName);
                    if (response.ok) {
                        const html = await response.text();
                        const article = extractArticleFromHTML(html, fileName);
                        if (article) {
                            realArticles.push(article);
                        }
                    }
                } catch (error) {
                    console.log(`Erreur lors du chargement de ${fileName}:`, error);
                }
            }

            loadingAlert.style.display = 'none';
            displayImportArticles(realArticles);
            showAlert('success', `${realArticles.length} articles charg√©s avec succ√®s !`);
        }

        // Extraire le contenu d'un article HTML
        function extractArticleFromHTML(html, fileName) {
            try {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;

                const titleElement = tempDiv.querySelector('title');
                let title = 'Titre non trouv√©';
                if (titleElement) {
                    title = titleElement.textContent.replace(' - CrossCheck', '').trim();
                }

                let category = 'apologetique';
                if (fileName.includes('science') || fileName.includes('big-bang') || fileName.includes('dna') || fileName.includes('evolution') || fileName.includes('fine-tuning')) {
                    category = 'science';
                } else if (fileName.includes('archeologie') || fileName.includes('jericho') || fileName.includes('mesha') || fileName.includes('catacombes')) {
                    category = 'archeologie';
                } else if (fileName.includes('histoire') || fileName.includes('togo') || fileName.includes('missions') || fileName.includes('croisades')) {
                    category = 'histoire';
                }

                const contentElement = tempDiv.querySelector('.article-content');
                let content = 'Contenu non trouv√©';
                let description = 'Description non trouv√©e';
                
                if (contentElement) {
                    content = contentElement.textContent.trim();
                    description = content.substring(0, 200) + '...';
                }

                const imageElement = tempDiv.querySelector('.article-image img');
                let image = 'https://via.placeholder.com/800x400?text=Article+CrossCheck';
                if (imageElement) {
                    image = imageElement.src;
                }

                const dateElement = tempDiv.querySelector('.article-meta span');
                let date = new Date().toLocaleDateString('fr-FR');
                if (dateElement) {
                    date = dateElement.textContent.trim();
                }

                const icons = {
                    'apologetique': 'üõ°Ô∏è',
                    'science': 'üî¨',
                    'histoire': 'üìö',
                    'archeologie': 'üèõÔ∏è'
                };

                return {
                    id: Date.now() + Math.random(),
                    title: title,
                    category: category,
                    description: description,
                    content: content,
                    image: image,
                    date: date,
                    originalFile: fileName,
                    icon: icons[category] || 'üìÑ'
                };
            } catch (error) {
                console.error(`Erreur lors de l'extraction de ${fileName}:`, error);
                return null;
            }
        }

        // Afficher les articles √† importer
        function displayImportArticles(articles) {
            const grid = document.getElementById('import-grid');
            
            if (articles.length === 0) {
                grid.innerHTML = '<div class="loading"><p>Aucun article trouv√©.</p></div>';
                return;
            }
            
            grid.innerHTML = articles.map(article => {
                const isImported = isArticleImported(article.originalFile);
                return `
                    <div class="article-card" onclick="selectImportArticle('${article.id}')" data-id="${article.id}">
                        <div class="article-image">
                            ${article.icon}
                            <div class="article-category">${article.category}</div>
                        </div>
                        <div class="article-content">
                            <h3 class="article-title">${article.title}</h3>
                            <p class="article-description">${article.description}</p>
                            <div class="article-meta">
                                <span>${article.date}</span>
                                <div class="article-status ${isImported ? 'status-imported' : 'status-available'}">
                                    ${isImported ? 'Import√©' : 'Disponible'}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Charger les articles du CMS
        function loadCMSArticles() {
            const grid = document.getElementById('manage-grid');
            const articles = JSON.parse(localStorage.getItem('cms-articles') || '[]');
            
            if (articles.length === 0) {
                grid.innerHTML = '<div class="loading"><p>Aucun article cr√©√© dans le CMS pour le moment.</p></div>';
                return;
            }
            
            grid.innerHTML = articles.map(article => {
                const icons = {
                    'apologetique': 'üõ°Ô∏è',
                    'science': 'üî¨',
                    'history': 'üìö',
                    'archeologie': 'üèõÔ∏è'
                };
                
                return `
                    <div class="article-card">
                        <div class="article-image">
                            ${icons[article.category] || 'üìÑ'}
                            <div class="article-category">${article.category}</div>
                        </div>
                        <div class="article-content">
                            <h3 class="article-title">${article.title}</h3>
                            <p class="article-description">${article.description}</p>
                            <div class="article-meta">
                                <span>${article.date}</span>
                                <div class="article-status status-cms">CMS</div>
                            </div>
                            <div class="article-actions">
                                <button class="btn btn-primary" onclick="editCMSArticle('${article.id}')">
                                    ‚úèÔ∏è Modifier
                                </button>
                                <button class="btn btn-danger" onclick="deleteCMSArticle('${article.id}')">
                                    üóëÔ∏è Supprimer
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // V√©rifier si un article est d√©j√† import√©
        function isArticleImported(originalFile) {
            const cmsArticles = JSON.parse(localStorage.getItem('cms-articles') || '[]');
            return cmsArticles.some(article => article.originalFile === originalFile);
        }

        // S√©lectionner un article √† importer
        function selectImportArticle(id) {
            document.querySelectorAll('#import-grid .article-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const articleElement = document.querySelector(`#import-grid [data-id="${id}"]`);
            if (articleElement) {
                articleElement.classList.add('selected');
                selectedImportArticle = realArticles.find(a => a.id == id);
                
                const selectedInfo = document.getElementById('import-selected-info');
                const selectedDetails = document.getElementById('import-selected-details');
                
                selectedDetails.innerHTML = `
                    <h4>${selectedImportArticle.title}</h4>
                    <p><strong>Cat√©gorie:</strong> ${selectedImportArticle.category}</p>
                    <p><strong>Date:</strong> ${selectedImportArticle.date}</p>
                    <p><strong>Description:</strong> ${selectedImportArticle.description}</p>
                    <p><strong>Fichier:</strong> ${selectedImportArticle.originalFile}</p>
                `;
                
                selectedInfo.style.display = 'block';
            }
        }

        // Importer l'article s√©lectionn√©
        function importSelectedArticle() {
            if (!selectedImportArticle) return;
            
            if (isArticleImported(selectedImportArticle.originalFile)) {
                showAlert('error', 'Cet article est d√©j√† import√© dans le CMS !');
                return;
            }
            
            const cmsArticle = {
                ...selectedImportArticle,
                id: Date.now(),
                isImported: true,
                importDate: new Date().toLocaleDateString('fr-FR')
            };
            
            let cmsArticles = JSON.parse(localStorage.getItem('cms-articles') || '[]');
            cmsArticles.push(cmsArticle);
            localStorage.setItem('cms-articles', JSON.stringify(cmsArticles));
            
            showAlert('success', `Article "${selectedImportArticle.title}" import√© avec succ√®s !`);
            
            displayImportArticles(realArticles);
            clearImportSelection();
        }

        // Effacer la s√©lection d'import
        function clearImportSelection() {
            selectedImportArticle = null;
            document.getElementById('import-selected-info').style.display = 'none';
            document.querySelectorAll('#import-grid .article-card').forEach(card => {
                card.classList.remove('selected');
            });
        }

        // Modifier un article du CMS
        function editCMSArticle(articleId) {
            const cmsArticles = JSON.parse(localStorage.getItem('cms-articles') || '[]');
            const article = cmsArticles.find(a => a.id == articleId);
            
            if (!article) {
                showAlert('error', 'Article non trouv√© !');
                return;
            }
            
            // Remplir le formulaire
            document.getElementById('title').value = article.title;
            document.getElementById('category').value = article.category;
            document.getElementById('description').value = article.description;
            document.getElementById('content').value = article.content;
            document.getElementById('image').value = article.image || '';
            
            // Aller √† l'onglet cr√©er
            showTab('create');
            editingArticleId = articleId;
            
            // Modifier le bouton
            const submitBtn = document.querySelector('#article-form button[type="submit"]');
            submitBtn.textContent = '‚ú® Modifier l\'article';
            submitBtn.onclick = function(e) {
                e.preventDefault();
                updateArticle(articleId);
            };
            
            showAlert('success', 'Article charg√© pour modification !');
        }

        // Mettre √† jour un article
        function updateArticle(articleId) {
            const formData = new FormData(document.getElementById('article-form'));
            const updatedArticle = {
                title: formData.get('title'),
                category: formData.get('category'),
                description: formData.get('description'),
                content: formData.get('content'),
                image: formData.get('image')
            };
            
            let articles = JSON.parse(localStorage.getItem('cms-articles') || '[]');
            const index = articles.findIndex(a => a.id == articleId);
            if (index !== -1) {
                articles[index] = {
                    ...articles[index],
                    ...updatedArticle
                };
                localStorage.setItem('cms-articles', JSON.stringify(articles));
                
                showAlert('success', 'Article modifi√© avec succ√®s !');
                
                // Remettre le bouton normal
                const submitBtn = document.querySelector('#article-form button[type="submit"]');
                submitBtn.textContent = '‚ú® Cr√©er l\'article';
                submitBtn.onclick = null;
                
                // Vider le formulaire
                document.getElementById('article-form').reset();
                editingArticleId = null;
                
                // Retourner √† l'onglet g√©rer
                showTab('manage');
            } else {
                showAlert('error', 'Erreur lors de la modification !');
            }
        }

        // Supprimer un article du CMS
        function deleteCMSArticle(articleId) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer cet article du CMS ?')) {
                let articles = JSON.parse(localStorage.getItem('cms-articles') || '[]');
                articles = articles.filter(article => article.id != articleId);
                localStorage.setItem('cms-articles', JSON.stringify(articles));
                
                showAlert('success', 'Article supprim√© du CMS !');
                loadCMSArticles();
                updateStats();
            }
        }

        // Mettre √† jour les statistiques
        function updateStats() {
            const articles = JSON.parse(localStorage.getItem('cms-articles') || '[]');
            const cmsArticles = articles.filter(a => a.isCMS);
            const importedArticles = articles.filter(a => a.isImported);
            
            document.getElementById('total-articles').textContent = cmsArticles.length;
            document.getElementById('total-imported').textContent = importedArticles.length;
            document.getElementById('total-available').textContent = articleFiles.length;
            
            // D√©tails des statistiques
            const statsDetails = document.getElementById('stats-details');
            const categoryStats = {};
            
            articles.forEach(article => {
                categoryStats[article.category] = (categoryStats[article.category] || 0) + 1;
            });
            
            let statsHTML = '<h4>Articles par cat√©gorie :</h4><ul>';
            Object.entries(categoryStats).forEach(([category, count]) => {
                statsHTML += `<li><strong>${category}:</strong> ${count} articles</li>`;
            });
            statsHTML += '</ul>';
            
            statsDetails.innerHTML = statsHTML;
        }

        // Affichage des alertes
        function showAlert(type, message) {
            const alert = document.getElementById(type === 'success' ? 'success-alert' : 'error-alert');
            alert.textContent = message;
            alert.style.display = 'block';
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log('CMS CrossCheck charg√©');
            updateStats();
        });
    </script>
</body>
</html>