<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test CMS Debug</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 2rem; }
        .status { padding: 1rem; margin: 1rem 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>üîç Test de Debug du CMS</h1>
    
    <div id="status-container">
        <div class="status info">
            <strong>üß™ Tests en cours...</strong>
        </div>
    </div>

    <div id="results"></div>

    <script>
        const statusContainer = document.getElementById('status-container');
        const resultsContainer = document.getElementById('results');

        function addStatus(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = `<strong>${message}</strong>`;
            statusContainer.appendChild(div);
        }

        function addResult(title, content) {
            const div = document.createElement('div');
            div.innerHTML = `<h3>${title}</h3><pre>${content}</pre>`;
            resultsContainer.appendChild(div);
        }

        // Test 1: V√©rifier si les fichiers sont accessibles
        addStatus('üîç Test 1: V√©rification des fichiers...');
        
        fetch('articles-reels-extraits.json')
            .then(response => {
                if (response.ok) {
                    addStatus('‚úÖ articles-reels-extraits.json accessible', 'success');
                    return response.json();
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            })
            .then(data => {
                addResult('üìÑ Contenu articles-reels-extraits.json', JSON.stringify(data, null, 2).substring(0, 500) + '...');
                addStatus(`‚úÖ ${data.articles ? data.articles.length : 0} articles trouv√©s`, 'success');
            })
            .catch(error => {
                addStatus(`‚ùå Erreur articles-reels-extraits.json: ${error.message}`, 'error');
            });

        // Test 2: V√©rifier localStorage
        addStatus('üîç Test 2: V√©rification du localStorage...');
        try {
            localStorage.setItem('test', 'ok');
            const test = localStorage.getItem('test');
            if (test === 'ok') {
                addStatus('‚úÖ localStorage fonctionne', 'success');
                localStorage.removeItem('test');
            } else {
                addStatus('‚ùå localStorage ne fonctionne pas correctement', 'error');
            }
        } catch (error) {
            addStatus(`‚ùå Erreur localStorage: ${error.message}`, 'error');
        }

        // Test 3: V√©rifier les articles CMS existants
        addStatus('üîç Test 3: V√©rification des articles CMS...');
        const cmsArticles = localStorage.getItem('cms-articles');
        if (cmsArticles) {
            try {
                const articles = JSON.parse(cmsArticles);
                addStatus(`‚úÖ ${articles.length} articles CMS trouv√©s`, 'success');
                addResult('üìù Articles CMS', JSON.stringify(articles, null, 2).substring(0, 500) + '...');
            } catch (error) {
                addStatus(`‚ùå Erreur parsing articles CMS: ${error.message}`, 'error');
            }
        } else {
            addStatus('‚ÑπÔ∏è Aucun article CMS trouv√© (normal pour premi√®re utilisation)', 'info');
        }

        // Test 4: V√©rifier les fonctions JavaScript de base
        addStatus('üîç Test 4: Test des fonctions JavaScript...');
        try {
            // Test de cr√©ation d'un √©l√©ment
            const testDiv = document.createElement('div');
            testDiv.innerHTML = 'Test';
            addStatus('‚úÖ Cr√©ation d\'√©l√©ments DOM fonctionne', 'success');

            // Test de fetch
            if (typeof fetch === 'function') {
                addStatus('‚úÖ Fonction fetch disponible', 'success');
            } else {
                addStatus('‚ùå Fonction fetch non disponible', 'error');
            }

            // Test de JSON
            const testObj = { test: 'ok' };
            const testJson = JSON.stringify(testObj);
            const testParsed = JSON.parse(testJson);
            if (testParsed.test === 'ok') {
                addStatus('‚úÖ JSON.stringify/parse fonctionne', 'success');
            } else {
                addStatus('‚ùå Probl√®me avec JSON', 'error');
            }

        } catch (error) {
            addStatus(`‚ùå Erreur JavaScript: ${error.message}`, 'error');
        }

        addStatus('üéØ Tests termin√©s ! V√©rifiez les r√©sultats ci-dessus.', 'info');
    </script>
</body>
</html>
